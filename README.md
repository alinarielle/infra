# alina's NixOS flake

this is the NixOS configuration for my entire infrastructure

## Structure
```
flake
├── flake.nix		# entry point & general configuration of the flake
├── flake.lock		# version pinning for nixpkgs and other dependencies
├── hosts		    # config for specific hosts
│   ├── tracer		    # network proxy for rDNS & test environment
│   ├── flora		    # hypervisor
│   ├── terra		    # restic backup host
│   ├── snow		    # hypervisor & storage box
│   ├── choco		    # desktop: workstation
│   ├── lilium		    # desktop: laptop
│   └── iso		        # config for my custom NixOS installer image, built with build-iso
├── common		    # configuration that is applied to every host
│   ├── default.nix # misc config
│   ├── kernel.nix  # kernel hardening and configuration deployed on every host
│   └── bootloader.nix # config for the bootloader
├── network		    # configu for the network shared between hosts
│   ├── web         # general config for web exposed services
│   ├── bgp         # BGP config for dn42
│   ├── dns         # DNS configuration for my network
│   └── mesh        # config for the internal wireguard network
├── profiles		# abstract definition of roles which are imported into hosts
├── scripts		    # miscellaneous (shell) scripts for faster deployment
├── secrets		    # secrets generated by sops-nix
├── services		# config for specific services
├── users		    # config for specific users
├── lib             # helper functions
├── .justfile 		# shortcuts for flake related commands
├── .sops.yaml		# configu for sops-nix
└── .envrc		# direnv configuration to enter the flake devshell
```
## Project related commands
- update => updates flake.lock
- build-iso => builds the custom installer image
